<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" lang="ko">
  <!-- 모바일 스케일 고정 -->
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta description="홀덤 승률">
  <meta keywords="홀덤, 승률, 자유주제">
  <meta author="iseohyun">
  <!-- 페이지 타이틀 -->
  <title>확률: 자유주제</title>
  <link rel="shortcut icon" type="image/x-icon" href="/source/icon_seohyun.svg">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-453XSP5W9M"></script>
  <script>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-453XSP5W9M');</script>
  <!-- 소스코드 스타일 -->
  <link rel="stylesheet" href="/highlight/styles/github.min.css" />
  <script src="/highlight/highlight.min.js"></script>
  <script src="/highlight/highlightjs-line-numbers.js"></script>
  <script>hljs.highlightAll(); hljs.initLineNumbersOnLoad();</script>
  <!-- 수식 -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!-- 차트 -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- 목차 생성 -->
  <script src="/modules/hd_list.js" defer></script>
  <!-- 공통스킨 -->
  <style type="text/css">
    @import url("/style.css");

    h1 {
      counter-increment: reference-no 0 h1-no 3;
    }

    var2 {
      font-style: normal;
      border: 1px solid #ddd;
      padding: 2px;
      border-radius: 4px;
      margin-left: 2px;
      min-width: 1em;
      line-height: 1.2em;
      display: inline-block;
      text-align: center;
      color: red;
    }
  </style>
</head>

<body>
  <article>
    <div id="title">승률</div>

    <p>
      용어와 Hand rank에 관한 내용은 <a href="hold'em.html">이전포스팅</a>을 참고하십시오.
    </p>

    <h1>승률</h1>
    <p>
      확률적 맥락에 의해 <var>♠A</var><var>♣A</var>와 <var2>♥A</var2>
      <var2>◆A</var2>의 승률은 똑같습니다. 같은 이유로, <var>♠A</var><var>♠K</var>는 <var2>♥A</var2>
      <var2>♥K</var2>, <var2>◆A</var2>
      <var2>◆K</var2>와 같은 승률을 갖습니다. 따라서, 아래와 같이 13가지 pocket과 suit, off-suit의 gapper 총 169가지 승률만 미리 구해놓을 수 있으면, 모든 경우의
      승률을 알 수 있습니다.
    </p>
    <div id="hand-cases">
      <style>
        #hand-cases {
          margin: 10px auto;
          display: flex;
          flex-direction: column;
          flex-wrap: nowrap;
          align-items: center;
          justify-content: flex-start;
        }

        #hand-cases>div {
          display: flex;
          flex-direction: row;
        }

        #hand-cases>div>div {
          display: flex;
          border: 1px solid #ddd;
          border-radius: 5px;
          padding: 5px;
          margin: 1px;
          width: 1.5em;
          height: 1.5em;
          /* text-align: center; */
          justify-content: center;
          align-items: center;
          font-family: var(--font-monospace);
          transition: background-color 0.5s ease;
          cursor: default;
        }

        #hand-cases>div>div:hover {
          background-color: #444;
          color: #fff;
        }

        #hand-cases div.off-suited {
          background-color: #fee;
        }

        #hand-cases div.suited {
          background-color: #eef;
        }

        #hand-cases div.pocket {
          background-color: #efe;
        }
      </style>
      <div>
        <div></div>
        <div>A</div>
        <div>K</div>
        <div>Q</div>
        <div>J</div>
        <div>T</div>
        <div>9</div>
        <div>8</div>
        <div>7</div>
        <div>6</div>
        <div>5</div>
        <div>4</div>
        <div>3</div>
        <div>2</div>
      </div>
      <div>
        <div>A</div>
        <div class="pocket">AA</div>
        <div class="suited">AKs</div>
        <div class="suited">AQs</div>
        <div class="suited">AJs</div>
        <div class="suited">ATs</div>
        <div class="suited">A9s</div>
        <div class="suited">A8s</div>
        <div class="suited">A7s</div>
        <div class="suited">A6s</div>
        <div class="suited">A5s</div>
        <div class="suited">A4s</div>
        <div class="suited">A3s</div>
        <div class="suited">A2s</div>
      </div>
      <div>
        <div>K</div>
        <div class="off-suited">AKo</div>
        <div class="pocket">KK</div>
        <div class="suited">KQs</div>
        <div class="suited">KJs</div>
        <div class="suited">KTs</div>
        <div class="suited">K9s</div>
        <div class="suited">K8s</div>
        <div class="suited">K7s</div>
        <div class="suited">K6s</div>
        <div class="suited">K5s</div>
        <div class="suited">K4s</div>
        <div class="suited">K3s</div>
        <div class="suited">K2s</div>
      </div>
      <div>
        <div>Q</div>
        <div class="off-suited">AQo</div>
        <div class="off-suited">KQo</div>
        <div class="pocket">QQ</div>
        <div class="suited">QJs</div>
        <div class="suited">QTs</div>
        <div class="suited">Q9s</div>
        <div class="suited">Q8s</div>
        <div class="suited">Q7s</div>
        <div class="suited">Q6s</div>
        <div class="suited">Q5s</div>
        <div class="suited">Q4s</div>
        <div class="suited">Q3s</div>
        <div class="suited">Q2s</div>
      </div>
      <div>
        <div>J</div>
        <div class="off-suited">AJo</div>
        <div class="off-suited">KJo</div>
        <div class="off-suited">QJo</div>
        <div class="pocket">JJ</div>
        <div class="suited">JTs</div>
        <div class="suited">J9s</div>
        <div class="suited">J8s</div>
        <div class="suited">J7s</div>
        <div class="suited">J6s</div>
        <div class="suited">J5s</div>
        <div class="suited">J4s</div>
        <div class="suited">J3s</div>
        <div class="suited">J2s</div>
      </div>
      <div>
        <div>T</div>
        <div class="off-suited">ATo</div>
        <div class="off-suited">KTo</div>
        <div class="off-suited">QTo</div>
        <div class="off-suited">JTo</div>
        <div class="pocket">TT</div>
        <div class="suited">T9s</div>
        <div class="suited">T8s</div>
        <div class="suited">T7s</div>
        <div class="suited">T6s</div>
        <div class="suited">T5s</div>
        <div class="suited">T4s</div>
        <div class="suited">T3s</div>
        <div class="suited">T2s</div>
      </div>
      <div>
        <div>9</div>
        <div class="off-suited">A9o</div>
        <div class="off-suited">K9o</div>
        <div class="off-suited">Q9o</div>
        <div class="off-suited">J9o</div>
        <div class="off-suited">T9s</div>
        <div class="pocket">99</div>
        <div class="suited">98s</div>
        <div class="suited">97s</div>
        <div class="suited">96s</div>
        <div class="suited">95s</div>
        <div class="suited">94s</div>
        <div class="suited">93s</div>
        <div class="suited">92s</div>
      </div>
      <div>
        <div>8</div>
        <div class="off-suited">A8o</div>
        <div class="off-suited">K8o</div>
        <div class="off-suited">Q8o</div>
        <div class="off-suited">J8o</div>
        <div class="off-suited">T8o</div>
        <div class="off-suited">98o</div>
        <div class="pocket">88</div>
        <div class="suited">87s</div>
        <div class="suited">86s</div>
        <div class="suited">85s</div>
        <div class="suited">84s</div>
        <div class="suited">83s</div>
        <div class="suited">82s</div>
      </div>
      <div>
        <div>7</div>
        <div class="off-suited">A7o</div>
        <div class="off-suited">K7o</div>
        <div class="off-suited">Q7o</div>
        <div class="off-suited">J7o</div>
        <div class="off-suited">T7o</div>
        <div class="off-suited">97o</div>
        <div class="off-suited">87o</div>
        <div class="pocket">77</div>
        <div class="suited">76s</div>
        <div class="suited">75s</div>
        <div class="suited">74s</div>
        <div class="suited">73s</div>
        <div class="suited">72s</div>
      </div>
      <div>
        <div>K</div>
        <div class="off-suited">A6o</div>
        <div class="off-suited">K6o</div>
        <div class="off-suited">Q6o</div>
        <div class="off-suited">J6o</div>
        <div class="off-suited">T6o</div>
        <div class="off-suited">96o</div>
        <div class="off-suited">86o</div>
        <div class="off-suited">76o</div>
        <div class="pocket">66</div>
        <div class="suited">65s</div>
        <div class="suited">64s</div>
        <div class="suited">63s</div>
        <div class="suited">62s</div>
      </div>
      <div>
        <div>5</div>
        <div class="off-suited">A5o</div>
        <div class="off-suited">K5o</div>
        <div class="off-suited">Q5o</div>
        <div class="off-suited">J5o</div>
        <div class="off-suited">T5o</div>
        <div class="off-suited">95o</div>
        <div class="off-suited">85o</div>
        <div class="off-suited">75o</div>
        <div class="off-suited">65o</div>
        <div class="pocket">55</div>
        <div class="suited">54s</div>
        <div class="suited">53s</div>
        <div class="suited">52s</div>
      </div>
      <div>
        <div>4</div>
        <div class="off-suited">A4o</div>
        <div class="off-suited">K4o</div>
        <div class="off-suited">Q4o</div>
        <div class="off-suited">J4o</div>
        <div class="off-suited">T4o</div>
        <div class="off-suited">94o</div>
        <div class="off-suited">84o</div>
        <div class="off-suited">74o</div>
        <div class="off-suited">64o</div>
        <div class="off-suited">54o</div>
        <div class="pocket">44</div>
        <div class="suited">43s</div>
        <div class="suited">42s</div>
      </div>
      <div>
        <div>3</div>
        <div class="off-suited">A3o</div>
        <div class="off-suited">K3o</div>
        <div class="off-suited">Q3o</div>
        <div class="off-suited">J3o</div>
        <div class="off-suited">T3o</div>
        <div class="off-suited">93o</div>
        <div class="off-suited">83o</div>
        <div class="off-suited">73o</div>
        <div class="off-suited">63o</div>
        <div class="off-suited">53o</div>
        <div class="off-suited">43o</div>
        <div class="pocket">33</div>
        <div class="suited">32s</div>
      </div>
      <div>
        <div>2</div>
        <div class="off-suited">A2o</div>
        <div class="off-suited">K2o</div>
        <div class="off-suited">Q2o</div>
        <div class="off-suited">J2o</div>
        <div class="off-suited">T2o</div>
        <div class="off-suited">92o</div>
        <div class="off-suited">82o</div>
        <div class="off-suited">72o</div>
        <div class="off-suited">62o</div>
        <div class="off-suited">52o</div>
        <div class="off-suited">42o</div>
        <div class="off-suited">32o</div>
        <div class="pocket">22</div>
      </div>
    </div>

    <h2>승자판별</h2>
    <p>
      각 player의 hand와 board(5장의 community card)가 공개되면, 각각의 hand로부터 rank를 계산해서 비교합니다. 이 때, split(공동 1등)을 염두해 두어야 합니다. (원본 code에 TC가 포함되어 있습니다.)
    </p>
    <div class="img-box">
      <img src="src/who_is_winner.drawio.png" />
      <span class="caption"></span>
      <span class="description">"who_is_winner.drawio.png.svg", iseohyun, iseohyun.com, public</span>
    </div>
    <pre><code class="python">def get_winner(players, board):
  ranks = []
  for player in players:
      ranks.append(get_rank(player + board))

  best_rank = ranks[0]  # 0번(p1) 임시 우승
  winner = [0]  # split(동시 우승) 가능성 있음

  for i in range(1, len(ranks)):  # 1번(p2)부터 챌린지
      current_rank = ranks[i]
      if current_rank[0] &lt; best_rank[0]:  # 랭킹 우위
          best_rank = current_rank  # 우승자 변경
          winner = [i]  # 우승자 목록 단독 기록
      elif current_rank[0] == best_rank[0]:  # 동일 랭킹, 하이카드 비교
          for cur, best in zip(current_rank[1], best_rank[1]):
              if values.index(cur) &lt; values.index(best):  # 새 우승자 탄생
                  best_rank = current_rank
                  winner = [i]
                  break
              elif values.index(cur) > values.index(best):
                  break
          else:
              winner.append(i)  # 공동 우승자 탄생

  return winner</code></pre>
  
  <h2>승리 횟수 판별</h2>
  <p>
    pre-flop에서 board는 공개되지 않았으므로, 모든 경우의 수
    \( _{52 - 2 * players}C_5 \)를 고려해야 합니다. heads-up의 경우
    \( _{48}C_5 = 1,712,304 \)가지 경우의 수가 존재합니다.
  </p>
  <pre><code class="python">def cnt_winner(players, board=["", "", "", "", ""]):
    """players, 카드 숫자로 넘어온다.(예)[[0,1],[2,3]]"""
    outs = [i for i in range(52)]
    winner_count = [0 for _ in range(len(players))]

    # players의 hand를 문자열로 바꾼다.
    for player in players:
        for i in range(2):
            outs.remove(player[i])
            player[i] = int2card(player[i])

    tot_match = 0
    for flop1 in range(0, len(outs) - 4):
        board[0] = int2card(outs[flop1])
        for flop2 in range(flop1 + 1, len(outs) - 3):
            board[1] = int2card(outs[flop2])
            for flop3 in range(flop2 + 1, len(outs) - 2):
                board[2] = int2card(outs[flop3])
                for turn in range(flop3 + 1, len(outs) - 1):
                    board[3] = int2card(outs[turn])
                    for river in range(turn + 1, len(outs)):
                        board[4] = int2card(outs[river])
                        winners = get_winner(players, board)
                        for winner in winners:
                            winner_count[winner] += 1

    # players의 hand를 숫자로 바꾼다.
    for player in players:
        for i in range(2):
            player[i] = card2int(player[i])

    # print(test_code) # test Code: 테스트 결과 출력력
    return winner_count</code></pre>

    <h3>코드 검증</h3>
    <p>
      간단한 계산으로 예측가능한 값과 실제로 출력된 갯수를 비교하여 검증하였습니다.
    </p>
    <details open>
      <summary><h4>CASE #1.</h4></summary>
      
      <blockquote><pre>
Hand) [As, Ac] [Ah, Ad]
조건) p2가 p1을 flush vs flush로 이길 경우의 수
출력결과) 1,540

예측) CC 5장이 모두 heart 또는 diamond가 나와야 함.
계산) 1. 모두 diamond가 나오면, p1도 flush가 성립하므로 12(Ad빠짐)에서 5장이 나올 경우의 수는 792가지
  p2가 R. flush가 나오는 경우를 제외[8개] : [Kd, Qd, Jd, Td] + 9d, 8d, 7d, 6d, 5d, 4d, 3d, 2d
  p2가 (back) S. flush [8개] : [5d, 4d, 3d, 2d] + 6d, 7d, 8d, 9d, Td, Jd, Qd, Kd
  (A Top 아닌) S.flush [6개] : (Qd, Jd, Td, 9d, 8d, 7d) Kd->R., 6d-> back
  도합 (792-22)*2개의 case발생 = 1540개
      </pre>
    </blockquote>
  </details>

  <details>
    <summary><h4>CASE #2.</h4></summary>
    
    <blockquote><pre>Hand) [As, Ts] [9s, 2s]
      조건) p2가 p1을 S. flush로이길 경우의 수
      출력 결과) 86개
      
      예측) '♠3456' + wild = 44C1, '♠5678' + wild = 44C1, 88개
      예외) S. flush Top8, Top7 무승부, 2개
      예측 결과) 86개

      p1 hand('As')
      ['<b>Ac</b>', '6s', '5s', '4s', '3s']
      ['<b>Ah</b>', '6s', '5s', '4s', '3s']
      ['<b>Ad</b>', '6s', '5s', '4s', '3s']
      ['<b>Ks</b>', '6s', '5s', '4s', '3s']
      ['<b>Kc</b>', '6s', '5s', '4s', '3s']
      ['<b>Kh</b>', '6s', '5s', '4s', '3s']
      ['<b>Kd</b>', '6s', '5s', '4s', '3s']
      ['<b>Qs</b>', '6s', '5s', '4s', '3s']
      ['<b>Qc</b>', '6s', '5s', '4s', '3s']
      ['<b>Qh</b>', '6s', '5s', '4s', '3s']
      ['<b>Qd</b>', '6s', '5s', '4s', '3s']
      ['<b>Js</b>', '6s', '5s', '4s', '3s']
      ['<b>Jc</b>', '6s', '5s', '4s', '3s']
      ['<b>Jh</b>', '6s', '5s', '4s', '3s']
      ['<b>Jd</b>', '6s', '5s', '4s', '3s']
      p1 hand('Ts')
      [<b>'Tc'</b>, '6s', '5s', '4s', '3s']
      [<b>'Th'</b>, '6s', '5s', '4s', '3s']
      [<b>'Td'</b>, '6s', '5s', '4s', '3s']
      p2 hand('9s')
      ['<b>9c</b>', '6s', '5s', '4s', '3s']
      ['<b>9h</b>', '6s', '5s', '4s', '3s']
      ['<b>9d</b>', '6s', '5s', '4s', '3s']
      ['<b>8s</b>', '6s', '5s', '4s', '3s']
      ['<b>8c</b>', '6s', '5s', '4s', '3s']
      ['<b>8h</b>', '6s', '5s', '4s', '3s']
      ['<b>8d</b>', '6s', '5s', '4s', '3s']
      (S. flush Top7 무승부)
      ['<b>7c</b>', '6s', '5s', '4s', '3s']
      ['<b>7h</b>', '6s', '5s', '4s', '3s']
      ['<b>7d</b>', '6s', '5s', '4s', '3s']
      65432 (p2: S. flush)
      ['6s', '<b>6c</b>', '5s', '4s', '3s']
      ['6s', '<b>6h</b>', '5s', '4s', '3s']
      ['6s', '<b>6d</b>', '5s', '4s', '3s']
      ['6s', '5s', '<b>5c</b>', '4s', '3s']
      ['6s', '5s', '<b>5h</b>', '4s', '3s']
      ['6s', '5s', '<b>5d</b>', '4s', '3s']
      ['6s', '5s', '4s', '<b>4c</b>', '3s']
      ['6s', '5s', '4s', '<b>4h</b>', '3s']
      ['6s', '5s', '4s', '<b>4d</b>', '3s']
      ['6s', '5s', '4s', '3s', '<b>3c</b>']
      ['6s', '5s', '4s', '3s', '<b>3h</b>']
      ['6s', '5s', '4s', '3s', '<b>3d</b>']
      p2 hand('2s')
      ['6s', '5s', '4s', '3s', '<b>2c</b>']
      ['6s', '5s', '4s', '3s', '<b>2h</b>']
      ['6s', '5s', '4s', '3s', '<b>2d</b>']
      
      p1 hans('As')
      ['<b>Ac</b>', '8s', '7s', '6s', '5s']
      ['<b>Ah</b>', '8s', '7s', '6s', '5s']
      ['<b>Ad</b>', '8s', '7s', '6s', '5s']
      ['<b>Ks</b>', '8s', '7s', '6s', '5s']
      ['<b>Kc</b>', '8s', '7s', '6s', '5s']
      ['<b>Kh</b>', '8s', '7s', '6s', '5s']
      ['<b>Kd</b>', '8s', '7s', '6s', '5s']
      ['<b>Qs</b>', '8s', '7s', '6s', '5s']
      ['<b>Qc</b>', '8s', '7s', '6s', '5s']
      ['<b>Qh</b>', '8s', '7s', '6s', '5s']
      ['<b>Qd</b>', '8s', '7s', '6s', '5s']
      ['<b>Js</b>', '8s', '7s', '6s', '5s']
      ['<b>Jc</b>', '8s', '7s', '6s', '5s']
      ['<b>Jh</b>', '8s', '7s', '6s', '5s']
      ['<b>Jd</b>', '8s', '7s', '6s', '5s']
      p1 hand('Ts')
      ['<b>Tc</b>', '8s', '7s', '6s', '5s']
      ['<b>Th</b>', '8s', '7s', '6s', '5s']
      ['<b>Td</b>', '8s', '7s', '6s', '5s']
      p2 hand('9s')
      ['<b>9c</b>', '8s', '7s', '6s', '5s']
      ['<b>9h</b>', '8s', '7s', '6s', '5s']
      ['<b>9d</b>', '8s', '7s', '6s', '5s']
      98765 (p2: S. flush)
      ['8s', '<b>8c</b>', '7s', '6s', '5s']
      ['8s', '<b>8h</b>', '7s', '6s', '5s']
      ['8s', '<b>8d</b>', '7s', '6s', '5s']
      ['8s', '7s', '<b>7c</b>', '6s', '5s']
      ['8s', '7s', '<b>7h</b>', '6s', '5s']
      ['8s', '7s', '<b>7d</b>', '6s', '5s']
      ['8s', '7s', '6s', '<b>6c</b>', '5s']
      ['8s', '7s', '6s', '<b>6h</b>', '5s']
      ['8s', '7s', '6s', '<b>6d</b>', '5s']
      ['8s', '7s', '6s', '5s', '<b>5c</b>']
      ['8s', '7s', '6s', '5s', '<b>5h</b>']
      ['8s', '7s', '6s', '5s', '<b>5d</b>']
      (S. flush Top8 무승부)
      ['8s', '7s', '6s', '5s', '<b>4c</b>']
      ['8s', '7s', '6s', '5s', '<b>4h</b>']
      ['8s', '7s', '6s', '5s', '<b>4d</b>']
      ['8s', '7s', '6s', '5s', '<b>3s</b>']
      ['8s', '7s', '6s', '5s', '<b>3c</b>']
      ['8s', '7s', '6s', '5s', '<b>3h</b>']
      ['8s', '7s', '6s', '5s', '<b>3d</b>']
      p2 hand('2s')
      ['8s', '7s', '6s', '5s', '<b>2c</b>']
      ['8s', '7s', '6s', '5s', '<b>2h</b>']
      ['8s', '7s', '6s', '5s', '<b>2d</b>']
      </pre></blockquote></details>

      <details>
        <summary><h4>CASE #3</h4></summary>
        <blockquote><pre>HAND) [As Ts] [2s 3s]
          조건) p2가 p1을 S. flush로 이길 경우의 수
          출력결과) 989

          예측) 45C2 = 990
          예외) ['4s', '5s', '6s', '7s', '8s']의 경우 8 Top S. flush로 동점
          예측 결과) 989</pre></blockquote>
      </details>

      <h2>파일로 저장</h2>
      <ul>
        <li>총 169개의 hand가 존재(총: 1690시간, 70일)</li>
        <li>하나의 Hand는 1개의 파일을 생성</li>
        <li>1개의 파일은 총 1,225개의 승부를 기록(약 600분: 10시간)</li>
        <li>1개의 승부는 각각 1,712,304의 경우의 수를 기록 (2~30초)</li>
        <li>각 경우의 수에서 2명의 플레이어의 hand rank를 비교</li>
        <li>각 hand는 10개의 rank로 구성</li>
      </ul>
      <pre><code class="python">def print_file(my_hand):
    # 1. 저장할 파일 불러오기
    filename = f"{my_hand[0]}{my_hand[1]}.txt"

    with open(filename, "r") as f:
        lines = f.readlines()

    # 2. 저장된 내용 불러오기(중단부분이 있다면), 시작할 지점 세팅
    players = [[card2int(my_hand[0]), card2int(my_hand[1])], [0, 0]]
    if lines:
        last_record = lines[-1]
        print("last record: ", last_record)
        last_record = ast.literal_eval(f"[{last_record}]")
        players[1] = [card2int(last_record[0][0]), card2int(last_record[0][1])]
        print(players)
    else:
        players[1] = [0, 0]

    start_processing = False # 중간 시작을 위한 flag

    # 3. draw된 카드 풀 삭제
    outs = [x for x in range(52)]
    outs.remove(players[0][0])
    outs.remove(players[0][1])

    # 4. player2의 hand 생성
    for i in range(50):
        if (not start_processing) and outs[i] &lt; players[1][0]:
            continue

        patterns = [] # hand패턴을 기억해서, 동일한 계산을 생략
        for j in range(i + 1, 50):
            if not start_processing:
                if outs[j] &lt;= players[1][1]:
                    if j == 49: # player2의 마지막 hand까지('2d') 계산이 완료된 경우
                        start_processing = True
                        print(">> Start process: ", players)
                    continue
                    
                start_processing = True
                print(">> Start process: ", players)

            # 5. 패턴 검사
            players[1] = [outs[i], outs[j]]
            cur_pattern = get_pattern(players)
            message_out = f"\n['{int2card(players[1][0])}', '{int2card(players[1][1])}'], "

            for k, pattern in enumerate(patterns):
                if cur_pattern == pattern: # 5-1: 이전 계산값을 파일에서 찾는다.
                    search_text = f"{int2card(outs[i])}', '{int2card(outs[j] -len(patterns) + k)}"
                    with open(filename, "r") as f:
                        for line in f:
                            if search_text in line:
                                winner_count = ast.literal_eval(f"[{line}]")[1]
                                message_out += f"{winner_count}, '*'" # 이 계산은 복사되었음을 표시한다.
                                break
                    break
            else:
                # 6. 1,712,304가지의 승부를 계산한다.
                winner_count = cnt_winner(players)
                message_out += f"{winner_count}"

            # 7. 파일에 기록한다.
            with open(filename, "a") as f:
                f.write(message_out)

            # 8. 패턴 정보를 업데이트 한다.
            if outs[j] % 4 == 3:
                patterns = []
            else:
                patterns.append(cur_pattern)</code></pre>

    <h2>저장된 파일(예시)</h2>
    <h3>AsAc.txt</h3>
    <p>
      아래 코드는 <var>♠A</var><var>♣A</var> hand가 다른 hand와 붙었을 때, 승리 횟수입니다.
      예를들어 <var2>♥A</var2><var2>♥K</var2>와 붙었을 때, 1,515,162번 이기고, 218,634번 진다는 의미입니다.
      총 전적수 1,712,304보다 21,492가 많은 이유는 draw가 발생하기 때문입니다.
    </p>
    <p>
      승률은 약 88.4867%이며, 동점을 제외하면 87.2316% 확률로 승리합니다.
    </p>
    <pre><code class="python">['Ah', 'Ad'], [1675094, 1675094]
['Ah', 'Ks'], [1612022, 123343]
['Ah', 'Kc'], [1612022, 123343]
['Ah', 'Kh'], [1515162, 218634] # 예시
['Ah', 'Kd'], [1595877, 137865]
['Ah', 'Qs'], [1604389, 130734]
['Ah', 'Qc'], [1604389, 130734]
['Ah', 'Qh'], [1508243, 225365]
['Ah', 'Qd'], [1588400, 145101]
['Ah', 'Js'], [1596756, 138125]
['Ah', 'Jc'], [1596756, 138125]
['Ah', 'Jh'], [1501324, 232096]
['Ah', 'Jd'], [1580923, 152337]
['Ah', 'Ts'], [1589123, 145516]</code></pre>
  </article>
</body>

</html>