<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" lang="ko">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta discription="튜토리얼을 제공합니다.">
  <meta keywords="iseohyun, 튜토리얼, SVG, 애니메이션">
  <meta author="iseohyun">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-453XSP5W9M"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-453XSP5W9M');
  </script>

  <!-- 페이지 타이틀 -->
  <title>애니메이션: SVG - iseohyun </title>
  <link rel="shortcut icon" type="image/x-icon" href="/source/icon_seohyun.svg">

  <!-- 소스코드 스타일 -->
  <link rel="stylesheet" href="/highlight/styles/base16/classic-light.min.css" />
  <script src="/highlight/highlight.min.js"></script>
  <script src="/highlight/highlightjs-line-numbers.js"></script>
  <script>
    hljs.highlightAll();
    hljs.initLineNumbersOnLoad();
  </script>

  <!-- 목차 생성 -->
  <script src="/modules/hd_list.js" defer></script>

  <!-- 공통스킨 -->
  <style type="text/css">
    @import url("/style.css");
  </style>
</head>

<body>
  <article>
    <div id="title">SVG: 애니메이션</div>

    <p>
      참조 :<br>(<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/animate#animation_attributes"
        target="_blank">developer.mozilla.org/.../SVG/Element/animate#animation_attributes</a>)
    </p>

    <h1>애니메이션 요소</h1>
    <h2>종류</h2>
    <table class="last-td-left">
      <caption>애니메이션 테그</caption>
      <thead>
        <tr>
          <th>테그명</th>
          <th>세부속성</th>
          <th>효과</th>
          <th>값</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td rowspan="10">공통</td>
          <td>keyTimes</td>
          <td>각 입력값의 타이밍</td>
          <td>0 ~ 1, 키 갯수 만큼</td>
        </tr>
        <tr>
          <td>calcMode</td>
          <td>부드러운 움직임</td>
          <td>linear, ease, discrete</td>
        </tr>
        <tr>
          <td>begin</td>
          <td>시작조건</td>
          <td>s, ms<br>이벤트명(이벤종류 상세)</td>
        </tr>
        <tr>
          <td>end</td>
          <td>종료조건</td>
          <td>s, ms<br>이벤트명(이벤종류 상세)</td>
        </tr>
        <tr>
          <td>value</td>
          <td>변경하고자하는 값Array, 구분자:세미콜론(;))</td>
          <td>속성에 부합하는 값</td>
        </tr>
        <tr>
          <td>dur</td>
          <td>변경 시간</td>
          <td>s, ms</td>
        </tr>
        <tr>
          <td>repeatCount</td>
          <td>변경 시간</td>
          <td>자연수, indefinite</td>
        </tr>
        <tr>
          <td>max</td>
          <td>지속기간</td>
          <td>s, ms</td>
        </tr>
        <tr>
          <td>restart</td>
          <td>재시작 조건</td>
          <td>always, never, whenNotActive(애니메이션 중엔 재시작X)</td>
        </tr>
        <tr>
          <td>additive</td>
          <td></td>
          <td>sum</td>
        </tr>
        <tr>
          <td>animate</td>
          <td>attributeName</td>
          <td>변경할 속성</td>
          <td>fill, opacity, fill-rule<br>
            stroke-opacity, stroke-width, stroke-linecap, stroke-linejoin, stroke-miterlimit, stroke-dasharray,
            stroke-dashoffset<br>
            display, visibility, shape-rendering, color-interpolation, pathLength<br>
            x, y, width, height, rx, ry, cx, cy, r...
          </td>
        </tr>
        <tr>
          <td>animateMotion</td>
          <td>path</td>
          <td>경로</td>
          <td>d="작성"</td>
        </tr>
        <tr>
          <td>animateTransform</td>
          <td>type</td>
          <td>변경 함수</td>
          <td>translate, rotate, scale, skewX, skewY</td>
        </tr>
    </table>
    <span class="tutorial">E_Animation >> animations.svg</span>

    <svg viewBox="0 0 400 380" xmlns="http://www.w3.org/2000/svg" xmlns:bx="https://boxy-svg.com"
      style="border: 1px solid #ddd">
      <g style="fill: #ddd; stroke: black">
        <path d="M 100 15 L 139 42 L 124 86 L 76 86 L 61 42 Z">
          <animateMotion path="M 0 0 C 0 0 35 23 54 22 C 71 21 100 0 100 0" calcMode="ease" dur="2s"
            repeatCount="indefinite" />
        </path>
        <path style="fill: none;" d="M 100 53 C 100 53 135 76 154 75 C 171 74 200 53 200 53" />

        <path d="M 100 105 L 139 132 L 124 176 L 76 176 L 61 132 Z" style="transform-origin: 100px 140px;">
          <animateTransform type="scale" attributeName="transform" values="1; 2" dur="2s" repeatCount="indefinite" />
        </path>

        <path d="M 100 190 L 139 217 L 124 261 L 76 261 L 61 217 Z" style="transform-origin: 100px 225px;"
          bx:shape="n-gon 100 229 41 39 5 0 1@b055bbde">
          <animateTransform type="rotate" attributeName="transform" values="0;270" dur="2s" repeatCount="indefinite" />
        </path>

        <path d="M 100 285 L 139 312 L 124 356 L 76 356 L 61 312 Z">
          <animateTransform type="translate" attributeName="transform" values="0 0;-30 -10; 30 10" dur="2s"
            keyTimes="0;0.3;1" repeatCount="indefinite" />
        </path>

        <path d="M 310 15 L 349 42 L 334 86 L 286 86 L 271 42 Z" style="transform-origin: 310px 50.5px;">
          <animateTransform type="skewX" attributeName="transform" values="0; 180" dur="2s" repeatCount="indefinite" />
        </path>

        <path d="M 310 105 L 349 132 L 334 176 L 286 176 L 271 132 Z">
          <animate attributeName="stroke" values="black; red" dur="2s" repeatCount="indefinite" />
          <animate attributeName="fill" values="#ddd; #0f8" dur="2s" repeatCount="indefinite" />
        </path>

        <path d="M 310 190 L 349 217 L 334 261 L 286 261 L 271 217 Z"
          style="stroke-dasharray: 240; stroke-dashoffset: -240px;">
          <animate attributeName="stroke-dashoffset" values="0px; 240px" dur="2s" repeatCount="indefinite" />
        </path>

        <rect x="251" y="288" width="50" height="50" style="fill:red" />
        <path d="M 310 285 L 349 312 L 334 356 L 286 356 L 271 312 Z">
          <animate attributeName="opacity" values="1; 0.5" dur="2s" repeatCount="indefinite" />
        </path>
      </g>
      <g style=" font-family: Arial, sans-serif; font-size: 16.7px;">
        <text x="45" y="57">animateMotion</text>
        <text x="80" y="148">scale</text>
        <text x="78" y="233">rotate</text>
        <text x="68" y="328">translate</text>
        <text x="288" y="59">skewX</text>
        <text x="300" y="135">fill</text>
        <text x="287" y="157">stroke</text>
        <text x="246" y="237">stroke-dashoffset</text>
        <text x="285" y="325">opacity</text>
      </g>
    </svg>

    <h2>이벤트</h2>
    <table class="last-td-left">
      <caption>이벤트의 종류</caption>
      <thead>
        <tr>
          <th>입력</th>
          <th>동작</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>마우스</td>
          <td>click, dblclick, aucclick(?), mousedown, mouseup, mouseleave, mousemove, mouseout, mouseover, wheel<br>
            pointerdown, pointerup, pointermove, pointerenter, pointerleave, pointover, pointerout, pointercancel
          </td>
        </tr>
        <tr>
          <td>스크린터치</td>
          <td>touchstart, touchmove, touchend, touchcancel(?)</td>
        </tr>
        <tr>
          <td>선택/해제</td>
          <td>focus, focusin, focusout, blur</td>
        </tr>
        <tr>
          <td>윈도우 이벤트</td>
          <td>contextmenu, select(?), load(?)</td>
        </tr>
    </table>

    <span class="tutorial">E_Animation >> events.svg</span>
    <svg viewBox="0 0 380 400" xmlns="http://www.w3.org/2000/svg" xmlns:bx="https://boxy-svg.com"
      style="border: 1px solid #ddd">

      <g style="fill: #ddd; stroke: black;transform-box: fill-box;">
        <path d="M 100 15 L 139 42 L 124 86 L 76 86 L 61 42 Z" id="first" style="transform-origin: 100px 55px;">
          <animateTransform type="rotate" attributeName="transform" values="0;360" dur="2s" repeatCount="1"
            begin="click" />
        </path>

        <path d="M 100 105 L 139 132 L 124 176 L 76 176 L 61 132 Z" style="transform-origin: 100px 145px;">
          <animateTransform type="rotate" attributeName="transform" values="0;360" dur="2s" repeatCount="1"
            begin="mouseenter" />
        </path>

        <path d="M 100 190 L 139 217 L 124 261 L 76 261 L 61 217 Z" style="transform-origin: 100px 230px;">
          <animateTransform type="rotate" attributeName="transform" values="0;360" dur="2s" repeatCount="1"
            begin="touchstart" />
        </path>

        <path d="M 100 285 L 139 312 L 124 356 L 76 356 L 61 312 Z" style="transform-origin: 100px 325px;">
          <animateTransform type="rotate" attributeName="transform" values="0;360" dur="2s" repeatCount="1"
            begin="touchmove" />
        </path>

        <path d="M 310 15 L 349 42 L 334 86 L 286 86 L 271 42 Z" style="transform-origin: 310px 45px;">
          <animateTransform type="rotate" attributeName="transform" values="0;360" dur="2s" repeatCount="1"
            begin="blur" />
        </path>

        <path d="M 310 105 L 349 132 L 334 176 L 286 176 L 271 132 Z" style="transform-origin: 310px 145px;">
          <animateTransform type="rotate" attributeName="transform" values="0;360" dur="2s" repeatCount="1"
            begin="contextmenu" />
        </path>

        <path d="M 310 190 L 349 217 L 334 261 L 286 261 L 271 217 Z" style="transform-origin: 310px 235px;">
          <animateTransform type="rotate" attributeName="transform" values="0;360" dur="2s" repeatCount="1"
            begin="click + 2s" />
        </path>

        <path d="M 310 285 L 349 312 L 334 356 L 286 356 L 271 312 Z" style="transform-origin: 310px 325px;">
          <animateTransform type="rotate" attributeName="transform" values="0;360" dur="2s" repeatCount="1"
            begin="first.click + 1s" />
        </path>
      </g>
      <g style=" font-family: Arial, sans-serif; font-size: 14px; text-anchor: middle">
        <text x="100" y="15">클릭(1번)</text>
        <text x="100" y="105">마우스오버</text>
        <text x="100" y="195">스크린 터치</text>
        <text x="100" y="285">스크린 드레그</text>
        <text x="310" y="15">해제시</text>
        <text x="310" y="105">좌클릭(메뉴)</text>
        <text x="310" y="195">클릭후 2초후</text>
        <text x="310" y="285">1번 클릭후, 1초후</text>
      </g>
    </svg>


    <h1>고려할 요소</h1>
    <h2>CSS연계</h2>
    <p>
      &nbsp;'예제1'과 '예제2'는 같은 내용입니다. 단지 css에서 제공하는 애니메이션 문법을 쓸 것인가(좌), svg에서 제공하는 애니메이션을 쓸 것인가(중)만 다릅니다. (우):
      offset테스트<br>
    </p>

    <style>
      #circle-test {
        width: 90%;
        display: flex;
        flex-direction: column;
        flex-wrap: nowrap;
        justify-content: flex-start;
        align-items: flex-end;
        margin: 10px auto;
      }

      #circle-test div:first-child {
        display: flex;
        justify-content: space-between;
      }

      .circle {
        stroke-dasharray: 314;
        animation: ani 2s linear infinite;
      }

      @keyframes ani {
        0% {
          stroke-dashoffset: -314;
        }

        50% {
          stroke-dashoffset: 0;
        }

        100% {
          stroke-dashoffset: 314;
        }
      }
    </style>
    <div id="circle-test">
      <div style="display: flex; flex-direction: row; flex-wrap: nowrap;">
        <svg viewbox="0 0 103 103" version="1.1" xmlns="http://www.w3.org/2000/svg"
          style="border:1px solid gray;padding:5px;border-radius: 15px;" width="30%">
          <path class="circle" d="M 52 1 a50,50 0 1 1 -1 0z" fill="none" stroke="red" />
        </svg>
        <svg viewbox="0 0 103 103" version="1.1" xmlns="http://www.w3.org/2000/svg"
          style="border:1px solid gray;padding:5px;border-radius: 15px;" width="30%">
          <path d="M 52 1 a50,50 0 1 1 -1 0z" fill="none" stroke="red" stroke-dasharray="314" stroke-dashoffset="0">
            <animate attributeName="stroke-dashoffset" values="314;0;-314" dur="3s" repeatCount="indefinite" />
          </path>
        </svg>
        <svg id="scrollsvg" viewbox="0 0 103 103" version="1.1" xmlns="http://www.w3.org/2000/svg"
          style="border:1px solid gray;padding:5px;border-radius: 15px;" width="30%">
          <path id="scrollpath" d="M 52 1 a50,50 0 1 1 -1 0z" fill="none" stroke="red" stroke-dasharray="314"
            stroke-dashoffset="0">
          </path>
        </svg>
        <script>
          var scrollsvg = document.getElementById("scrollsvg");
          var scrollpath = scrollsvg.getElementById("scrollpath");
        </script>
      </div>

      offset테스트(우)<input type="range" min="-314" max="314" value="0" onmousemove="scrollpath.style.strokeDashoffset=this.value;
      document.getElementById('scrollValue').value=this.value"><input id="scrollValue" type="text" value="0"
        disabled />
    </div>
    <oi>
      <li> 원은 지름이 100인 원입니다(a 50,50). 따라서 둘레가 314가 됩니다.</li>
      <li> stroke-dasharray는 점선 문법입니다. stroke-dasharray:314이므로 314px 칠하고, 314px지우고를 반복합니다.</li>
      <li> stroke-dashoffset은 얼마나 <u>뒤(진행반대방향)으로</u> 밀 것인가를 나타냅니다. offset:314가 되면 완전히 밀려서 뗀선314, 즉 안보이는 상태가 됩니다.</li>
      <li> duration:2s(2초)라면 50%(1초)동안 지우고, 50%(1초)동안 칠합니다.</li>
    </oi>

    <h3>예제1</h3>
    <span class="tutorial">E_Animation >> withCSS.html</span>
    <pre>
      <code class="language-html">&lt;svg viewbox="0 0 103 103" version="1.1" xmlns="http://www.w3.org/2000/svg">
&lt;path class="circle" d="M 52 1 a50,50 0 1 1 -1 0z" fill="none" stroke="red" />
&lt;/svg>
&lt;style>
  .circle {
    stroke-dasharray: 314;
    animation: ani 2s linear infinite;
  }

  @keyframes ani {
    0% {
      stroke-dashoffset: -314;
    }
    50% {
      stroke-dashoffset: 0;
    }
    100% {
      stroke-dashoffset: 314;
    }
  }
&lt;/style></code>
    </pre>
    <h3>예제2</h3>
    <pre>
      <code class="language-html">&lt;svg viewbox="0 0 103 103" version="1.1" xmlns="http://www.w3.org/2000/svg">
  &lt;path d="M 52 1 a50,50 0 1 1 -1 0z" fill="none" stroke="red" stroke-dasharray="314" stroke-dashoffset="0">
    &lt;animate attributeName="stroke-dashoffset" values="314;0;-314" dur="3s" repeatCount="indefinite" />
  &lt;/path>
&lt;/svg>
      </code>
    </pre>

    <h2>회전 중심점</h2>
    <p>&nbsp;아래 예제는 "from="0 60 70" to="360 60 70""에 의하여 화전 중심점을 지정하였습니다.</p>
    <svg width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg"
      style="border: 1px solid #ddd; border-radius: 15px;">
      <polygon points="60,30 90,90 30,90">
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" from="0 60 70" to="360 60 70"
          dur="10s" repeatCount="indefinite" />
      </polygon>
    </svg>
    <pre><code>&lt;svg width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg"
  &lt;polygon points="60,30 90,90 30,90">
    &lt;animateTransform attributeName="transform" attributeType="XML" type="rotate" from="0 60 70" to="360 60 70"
      dur="10s" repeatCount="indefinite" />
  &lt;/polygon>
&lt;/svg></code></pre>
    <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/animateTransform">출처:mozilla</a>

    <p>&nbsp;또는 아래와 같이 "transform-origin:"로 회전 중심점을 지정 할 수 있습니다.</p>
    <pre><code>&lt;path d="M 100 105 L 139 132 L 124 176 L 76 176 L 61 132 Z" style="transform-origin: 100px 145px;">
  &lt;animateTransform type="rotate" attributeName="transform" values="0;360" dur="2s" repeatCount="1" begin="mouseenter"/>
&lt;/path></code></pre>


    <h2>애니메이션 진행방향</h2>
    <svg viewBox="0 0 200 100" xmlns="http://www.w3.org/2000/svg" style="border: 1px solid #ddd; border-radius: 15px;">
      <path id="infinite-path" fill="none" stroke="lightgrey"
        d="M20,50 C20,-50 180,150 180,50 C180-50 20,150 20,50 z" />
      <ellipse rx="5" ry="7" fill="red">
        <animateMotion dur="10s" repeatCount="indefinite" path="M20,50 C20,-50 180,150 180,50 C180-50 20,150 20,50 z"
          rotate="auto" />
      </ellipse>
    </svg>
    <pre><code>&lt;svg viewBox="0 0 200 100" xmlns="http://www.w3.org/2000/svg">
  &lt;path id="infinite-path" fill="none" stroke="lightgrey"
    d="M20,50 C20,-50 180,150 180,50 C180-50 20,150 20,50 z" />
  &lt;ellipse rx="5" ry="7" fill="red">
    &lt;animateMotion dur="10s" repeatCount="indefinite" path="M20,50 C20,-50 180,150 180,50 C180-50 20,150 20,50 z"
      rotate="auto" />
  &lt;/ellipse>
&lt;/svg></code></pre>

    <h2>path 애니메이션</h2>
    &nbsp;마우스를 올려서 테스트 해 보세요.
    <style>
      #what-is-radian:hover path#arc {
        transition: 1s d ease-in-out;
        d: path("M110,100 v-73.3 a0 0 0 0 0 0 0");
      }

      #what-is-radian:hover path#tri {
        transition: 1s d ease-in-out;
        d: path("M10 100 h100 v-73.3 a0 0 0 0 0 0 0 z");
      }
    </style>

    <svg id="what-is-radian" xmlns="http://www.w3.org/2000/svg"
      style="font-size:15pt;font-style:italic;font-family:'Times New Roman', '강원교육모두';max-height:200;display:block;border: 1px solid #eee; border-radius: 15px;width: 80%;padding:10px;"
      viewBox="0 0 160 110">
      <path d="M10 100 h100 v-90 z" stroke-dasharray="5" style="stroke:black;fill:none;" />
      <path d="M10 100 h100 v0 a100 100 0 0 0 -25.7 -66.9 z" style="stroke:black;fill:#ddd;" />
      <path id="tri" d="M10 100 h100 v0 a100 100 0 0 0 -25.7 -66.9 z" style="stroke:black;fill:#ddd8;" />
      <path id="arc" d="M110 100 v0 a100 100 0 0 0 -25.7 -66.9" style="stroke:red;fill:none;stroke-width:3px" />
    </svg>
    &nbsp;주의 할 점은, path의 구성이 동일해야한다는 것입니다. 예제에서 Move, line, arc의 순서로 배치(<q>M</q>110,100 <q>v</q>-73.3 <q>a</q>0 0 0 0 0
    0 0)되었는데, <u>path의 순서/구성을 위배하면 동작은 되지만 애니메이션은 되지 않습니다.</u>
    <code><pre>&lt;style>
  #what-is-radian:hover path#arc {
    transition: 1s d ease-in-out;
    d: path("M110,100 v-73.3 a0 0 0 0 0 0 0");
  }

  #what-is-radian:hover path#tri {
    transition: 1s d ease-in-out;
    d: path("M10 100 h100 v-73.3 a0 0 0 0 0 0 0 z");
  }
&lt;/style>

&lt;svg id="what-is-radian" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 160 110">
  &lt;path d="M10 100 h100 v-90 z" stroke-dasharray="5" style="stroke:black;fill:none;" />
  &lt;path d="M10 100 h100 v0 a100 100 0 0 0 -25.7 -66.9 z" style="stroke:black;fill:#ddd;" />
  &lt;path id="tri" d="M10 100 h100 v0 a100 100 0 0 0 -25.7 -66.9 z" style="stroke:black;fill:#ddd8;" />
  &lt;path id="arc" d="M110 100 v0 a100 100 0 0 0 -25.7 -66.9" style="stroke:red;fill:none;stroke-width:3px" />
&lt;/svg></code></pre>
  </article>
</body>

</html>