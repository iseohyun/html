<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" lang="ko">
  <!-- 모바일 스케일 고정 -->
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta description="Git 구조를 상세하게 추적합니다.">
  <meta keywords="git-struct, git - iseohyun">
  <meta author="iseohyun">
  <!-- 페이지 타이틀 -->
  <title>git-struct: git - iseohyun</title>
  <link rel="shortcut icon" type="image/x-icon" href="/source/icon_seohyun.svg">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-453XSP5W9M"></script>
  <script>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-453XSP5W9M');</script>
  <!-- 소스코드 스타일 -->
  <link rel="stylesheet" href="/highlight/styles/base16/base16/cupertino.min.css" />
  <script src="/highlight/highlight.min.js"></script>
  <script src="/highlight/highlightjs-line-numbers.js"></script>
  <!-- 수식 -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!-- 차트 -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- 목차 생성 -->
  <script src="/modules/script.js" defer></script>
  <!-- 공통스킨 -->
  <style type="text/css">
    @import url("/style.css");
  </style>
</head>

<body>
  <article>
    <iframe src="src/contents.html" style="width:100%; height:auto; border:none;"
      onload="this.style.height=this.contentDocument.body.scrollHeight + 'px';"></iframe>

    <h1>정보 조회</h1>

    <h2>help</h2>
    <table class="all-td-left">
      <caption>git 명령어 해설</caption>
      <thead>
        <tr>
          <th>명령어</th>
          <th>내용</th>
          <th>설명, ($ 사용 예시), (> 출력 예시)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>git</td>
          <td rowspan="3">도움말</td>
          <td rowspan="2">현재 표(영문ver)</td>
        </tr>
        <tr>
          <td>git -h, git --help</td>
        </tr>
        <tr>
          <td>
            git help tutorial,<br>
            git help everyday,<br>
            git help revisions
          </td>
          <td>컨셉에 맞는 안내문 출력</td>
        </tr>
        <tr>
          <td>git -v, git --version</td>
          <td>버전확인</td>
          <td>> git version 2.38.1.windows.1</td>
        </tr>
        <tr>
          <td>git -C &lt;path></td>
          <td>작업 디렉토리 변경</td>
          <td>특정 디렉토리 상태 조회<br>$ git -C /path/to/repo status</td>
        </tr>
        <tr>
          <td>git -c &lt;name>=&lt;value><br>
            git --config-env=&lt;name>=&lt;envvar>
          </td>
          <td>설정값 변경</td>
          <td>작성자 변경<br>$ git -c-env GIT_AUTHOR_NAME="Temporary Author"
          </td>
        </tr>
        <tr>
          <td>git --exec-path[=&lt;path>]</td>
          <td>Git 실행(설치) 경로 출력</td>
          <td>> C:/Program Files/Git/mingw64/libexec/git-core</td>
        </tr>
        <tr>
          <td>git --html-path</td>
          <td rowspan="3">각각의 설명서 경로</td>
          <td>> C:/Program Files/Git/mingw64/share/doc/git-doc</td>
        </tr>
        <tr>
          <td>git --man-path</td>
          <td>> C:/Program Files/Git/mingw64/share/man</td>
        </tr>
        <tr>
          <td>git --info-path</td>
          <td>> C:/Program Files/Git/mingw64/share/info</td>
        </tr>
        <tr>
          <td>git -p, --paginate<br>
            git -P, --no-pager</td>
          <td>페이저(vi 편집기) 사용 여부</td>
          <td>
            편집기 없이 모두 출력<br>
            $ git --no-pager log</td>
        </tr>
        <tr>
          <td>git --no-replace-objects</td>
          <td>대체객체 사용 안함</td>
          <td>$ git --no-replace-objects checkout HEAD -- &lt;file></td>
        </tr>
        <tr>
          <td>git --bare</td>
          <td>작업디렉토리 없이 작업</td>
          <td>(주로 서버repo에 설정)</td>
        </tr>
        <tr>
          <td>git --work-tree=&lt;path></td>
          <td>작업트리 변경</td>
          <td>$ git --work-tree=/path/to/working-directory status</td>
        </tr>
        <tr>
          <td>git --namespace=&lt;name></td>
          <td>네임스페이스 변경</td>
          <td>$ git --namespace=my-namespace rev-parse HEAD</td>
        </tr>
        <tr>
          <td>git --super-prefix=&lt;path></td>
          <td>슈퍼접두사 변경</td>
          <td>$ git --namespace=my-namespace rev-parse HEAD</td>
        </tr>
        <tr>
          <td>git --upload-pack=&lt;path></td>
          <td>업로드팩 변경</td>
          <td>$ git fetch --upload-pack=/custom/path/git-upload-pack origin</td>
        </tr>
        <tr>
          <td>git --git-dir=&lt;path></td>
          <td>git디렉토리 변경</td>
          <td>$ git --git-dir=/path/to/repo/.git log</td>
        </tr>
        <tr>
          <td>git &lt;command> [&lt;args>]</td>
          <td colspan="2">[표. git command] 참조</td>
        </tr>
      </tbody>
    </table>

    <h2>log</h2>
    <span class="blockquote-title">git log 예제</span>
    <blockquote>
      git log --since="2023-01-01" <span class="comment">2023년 1월 1일 이후의 commit
        검색</span><br>
      git log abc1234..HEAD <span class="comment">abc1234 해쉬 이후의 commit
        검색(abc1234제외)</span><br>
      git log abc1234^..HEAD <span class="comment">abc1234 해쉬 이후의 commit
        검색(abc1234포함)</span><br>
      git log -5<span class="comment">최근 5개 검색</span><br>
      git log --grep="bug fix"<span class="comment">commit log에 "bug fix"가 있는
        commit검색</span>
    </blockquote>

    <p>
      아래 시나리오에서:
    </p>
    <ul>
      <li><b>HEAD</b> = <u>b722</u>d1a2336b6adbaee4ddd2947c59ef3091a0c9 = <b>b722</b>(최소
        4개 이상)</li>
      <li><u>1ea2</u>064ebd484c0d57a98b938cebc1407d228aaf = <b>1ea2</b> = <b>HEAD^</b> =
        <b>b722^</b>
      </li>
      <li><u>04b1</u>2d775a7a89be68b8a9d2f45ec231205314f2 = <b>04b1</b> = <b>1ea2^</b>
      </li>
    </ul>
    <span class="blockquote-title">log, commit hash의 의미</span>
    <blockquote class="shell">
      <pre>C:\myProject> <span style="color:yellow">git</span> log 04b1^..HEAD
<span style="color:goldenrod">commit b722d1a2336b6adbaee4ddd2947c59ef3091a0c9 (<span style="color:cyan">HEAD -></span> <span style="color:#0F0">master</span>)</span>
Author: iseohyun &lt;iseohyun@hanmail.net>
Date:   Sat Dec 28 05:23:21 2024 +0900

    rm 03_Shebang.py

<span style="color:goldenrod">commit 1ea2064ebd484c0d57a98b938cebc1407d228aaf</span>
Author: iseohyun &lt;iseohyun@hanmail.net>
Date:   Sat Dec 28 05:22:34 2024 +0900

    update filelist

<span style="color:goldenrod">commit 04b12d775a7a89be68b8a9d2f45ec231205314f2</span>
Author: iseohyun &lt;iseohyun@hanmail.net>
Date:   Sat Dec 28 05:22:02 2024 +0900

    add filelist.txt</pre>
    </blockquote>

    <h2>diff</h2>
    <p>
      diff 명령을 통해 두 버전<sub>commit</sub>간의 차이를 알 수 있습니다.
    </p>
    <span class="blockquote-title">git diff 예제</span>
    <blockquote>
      git diff<span class="comment">작업디렉터리와 HEAD와의 차이점을 출력합니다.</span><br>
      git diff HEAD^<span class="comment">작업디렉터리와 HEAD 바로 이전 commit과의 차이점을 출력</span><br>
      git diff HEAD HEAD^<span class="comment">HEAD와 HEAD 바로 이전의 차이점 출력</span><br>
      git diff --file-only<span class="comment">변경된 파일명만 나열</span><br>
    </blockquote>

    <div class="img-box">
      <img src="src/git-diff.svg" />
      <span class="caption">git-diff</span>
      <span class="description">"git-diff.svg", iseohyun.com, CC-BY-SA</span>
    </div>

    <span class="blockquote-title">파일 1개(03_Shebang.py)를 삭제한 뒤, diff를 실행</span>
    <blockquote class="shell">
      <pre>C:\myProject> <span style="color:yellow">rm</span> .\03_Shebang.py
C:\myProject> <span style="color:yellow">dir</span> > .\filelist.txt
C:\myProject> <span style="color:yellow">git</span> status
On branch master
Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        <span style="color:red">deleted:    03_Shebang.py
        modified:   filelist.txt</span>

no changes added to commit (use "git add" and/or "git commit -a")
C:\myProject> <span style="color:yellow">git</span> add .
C:\myProject> <span style="color:yellow">git</span> commit -m "rm 03_Shebang.py"
[master b722d1a] rm 03_Shebang.py
 2 files changed, 4 deletions(-)
 delete mode 100644 03_Shebang.py

C:\myProject> <span style="color:yellow">git</span> diff HEAD^
<span style="color:#eee;">diff --git a/03_Shebang.py b/03_Shebang.py
deleted file mode 100644
index 0ca3c66..0000000
--- a/03_Shebang.py
+++ /dev/null
<span style="color:skyblue">@@ -1,4 +0,0 @@</span>
<span style="color:red">-#!/usr/bin/env python3
-# Shebang (#!, 셔뱅): 유닉스 계열 운영체제에서 실행되는 스크립트
-
-print("Shebang(#!)은 첫 줄에 들어갑니다.")</span>
diff --git a/filelist.txt b/filelist.txt
index c172c63..59b5a81 100644</span>
Binary files a/filelist.txt and b/filelist.txt differ
</pre>
    </blockquote>

    <h2>grep</h2>
    <p>
      grep 명령을 통해 모든 파일중에서 특정 문자열을 검색할 수 있습니다.
    </p>
    <table class="all-td-left">
      <caption>grep 용법</caption>
      <thead>
        <tr>
          <th>명령어 예시</th>
          <th>해설</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>git grep "TODO"</td>
          <td>모든 파일에서 "TODO"를 검색</td>
        </tr>
        <tr>
          <td>git grep "TODO" src/</td>
          <td>src/ 에서 "TODO"를 검색</td>
        </tr>
        <tr>
          <td>git grep "TODO" main</td>
          <td>main branch에서 "TODO"를 검색</td>
        </tr>
        <tr>
          <td>git grep "TODO" 78845b9</td>
          <td>78845b9 commit에서 "TODO"를 검색</td>
        </tr>
        <tr>
          <td>git grep -e "TODO" -e "FIXME"</td>
          <td>"TODO" 또는 "FIXME"를 검색</td>
        </tr>
        <tr>
          <td>git grep -l "TODO"</td>
          <td>파일명만 출력</td>
        </tr>
        <tr>
          <td>git grep -n "TODO"</td>
          <td>라인번호 출력</td>
        </tr>
        <tr>
          <td>git grep --exclude-standard "TODO"</td>
          <td>.gitignore을 제외하고 "TODO"를 검색[문제해결: 파일 제외하기 참조]</td>
        </tr>
        <tr>
          <td>git grep -C 2 "TODO"</td>
          <td>앞뒤로 2줄까지 출력(Context:문맥)</td>
        </tr>
      </tbody>
    </table>

    <h2>show</h2>
    <p>
      show 명령을 통해 object의 정보(commit, file)를 출력 할 수 있습니다.
    </p>
    <blockquote>
      git show HEAD <span class="comment">최근 commit 정보 출력</span><br>
      git show tag <span class="comment">tag 정보 출력</span><br>
      git show hash <span class="comment">object 정보 출력</span><br>
    </blockquote>

    <h1>파일구조</h1>
    <span class="tutorial">scnario3.structure</span>
    <p>
      아래 그림과 같이 .git 디렉토리에는 저장소의 모든 정보가 저장되어 있습니다.
    </p>
    <ul>
      <li>object의 종류는 blob, tree, commit, tag가 있습니다.</li>
      <li>refs/heads/ 로부터 가장 최근의 commit을 가리키는 HEAD 파일이 있습니다.</li>
      <li>commit은 parent commit의 해시값과 tree object의 해시값을 가지고 있습니다.</li>
      <li>tree object는 blob object와 tree object를 가리키는 정보를 가지고 있습니다.</li>
    </ul>
    <div class="img-box">
      <img src="src/git-tree.svg" style="width:90%" />
      <span class="caption">파일구조</span>
      <span class="description">"git-tree.svg", iseohyun.com, CC-BY-SA </span>
    </div>

    <p>
    <pre style="display:inline"><var>https://github.com/iseohyun/git-tutorial.git</var></pre>
    의 structure를 살펴보면 다음과 같습니다.
    </p>
    <div class="blockquote-title">.git 분석 예시</div>
    <blockquote class="shell">
      <pre>.git/refs/<span style="color:#88F">heads</span>/<span style="color:#F0F">master</span> -> "<span style="color:#0F0">d608c5...</span>"
  .git/objects/<span style="color:#0F0">d6</span>/<span style="color:#0F0">08c5...</span> -> commit : "tree <span style="color:red">b5c012... </span>
                             parent <span style="color:yellow">5cc5bd...</span> ...(commit info)"
    .git/objects/<span style="color:red">b5</span>/<span style="color:red">c012...</span> -> tree : .
      100644 blob f6fcee...    all_files.txt
      100644 blob 937ee7...    all_object.txt
      100644 blob 6a5d71...    data1.bin
      100644 blob 2484e3...    hello_world.py
      040000 tree d3a9e2...    src  ++++++++++++ 재사용 ++++++++++++
      100644 blob 861ef2...    struct.txt
  
  <span style="color:yellow">5cc5bd...</span>
    .git/objects/<span style="color:yellow">5c</span>/<span style="color:yellow">c5bd...</span> -> commit : "tree f330a3... ...(commit info)"
      .git/objects/f3/30a3... -> tree : .
        100644 blob 6a5d71... -> blob : data1.bin
        100644 blob 00950d... -> blob : print('hello_world.py')
        040000 tree d3a9e2... 
        .git/objects/d3/a9e2... -> tree : ./src
          100644 blob 6e39da... -> blob : filelist.txt
          100644 blob 8bb656... -> blob : source.data</pre>
    </blockquote>

    <div class="blockquote-title">git log</div>
    <blockquote class="shell">
      <pre>C:\git-tutorial\structure> <span style="color:white">git log</span>
commit <span style="color:#0F0">d608c5b1c6cbbf3dc4e97df5d38b94cd480aac28</span> (<span style="color:#88F">HEAD</span> -> <span style="color:#F0F">master</span>)
Author: iseohyun &lt;iseohyun@hanmail.net>
Date:   Sun Dec 29 20:32:15 2024 +0900

    new commit

commit <span style="color:yellow">5cc5bd48ee208c668e5ef57de965641ddbcdfa65</span>
Author: iseohyun &lt;iseohyun@hanmail.net>
Date:   Sun Dec 29 20:09:37 2024 +0900

    first commit</pre>
    </blockquote>

    <h1>조회 방법</h1>
    <p>
      아래 명령어를 통해 모든 object를 조회할 수 있습니다.
    </p>
    <blockquote>
      git rev-list --all --objects
    </blockquote>
    <p>
      조회된 object의 해시값을 통해 object의 내용을 확인할 수 있습니다.
    </p>
    <blockquote>
      git cat-file -p <var>object_hash</var>
    </blockquote>
    <p>
      동봉된 py 또는 powershell script를 통해 object의 내용을 확인할 수 있습니다.<br>
      <var>print-obj.ps1</var>, <var>print-obj.py</var>
    </p>
    <div class="blockquote-title">스크립트 수행 예시</div>
    <blockquote class="shell">
      <pre>Hash                            Type    File Name
-----------------------------------------------------------
d608c5b1c6cbbf3dc4e97df5d38b94cd480aac28 commit   (no file)
5cc5bd48ee208c668e5ef57de965641ddbcdfa65 commit   (no file)
b5c012807e706ba20aebb4e48b029ae10d2817f9 tree
f6fcee0ba4034a631b8c074af61053449dd7197c blob     all_files.txt
937ee706ca07804619ae9ec79dfbe3bc4b626e9b blob     all_object.txt
6a5d7143202d163bd88466e1d1582dfc796409eb blob     data1.bin
2484e3aafa7c1e0e033082265a24674404096a04 blob     hello_world.py
d3a9e29f4aa2d93cf19c9cbb506dcf18fb3f7b15 tree     src
6e39dad2f1d91e49bada65481fb6acfb30735222 blob     src/filelist.txt
8bb6564fba2e5db883bbaefa432d24978ddcd830 blob     src/source.data
861ef265d8155a73d52c7731cfa7d8574790771f blob     struct.txt
f330a32d3cb1e6e5453dbc829a9ae41f0175fe71 tree
00950d9ac57ceeabf45f9120c2615199746d35fb blob     hello_world.py</pre>
    </blockquote>

  </article>
</body>

</html>